(function(){"use strict";var e={674:function(e,o,t){var n=t(963),s=t(252),i=t(577);const a={class:"container"},l={class:"pokedex__header"},r={class:"pokedex__menu"},p={class:"pokedex__search"},d=(0,s._)("label",{for:"pokemon-search"},"Find your pokemon: ",-1),m=(0,s._)("div",{class:"pokedex__separator"},null,-1),c={key:1,class:"pokedex__section"},h=["onClick"],k={class:"card__img"},u=["src","alt"],_={class:"card__id"},g={class:"card__name"},y={class:"card__type"};function f(e,o,t,f,v,P){const w=(0,s.up)("detailed-card");return(0,s.wg)(),(0,s.iD)("div",{onScroll:o[3]||(o[3]=(...e)=>P.pokeAddOnScroll&&P.pokeAddOnScroll(...e)),class:"pokedex"},[(0,s._)("div",a,[(0,s._)("div",l,[(0,s._)("div",r,[(0,s._)("div",{class:"pokedex__title",onClick:o[0]||(o[0]=e=>v.openedCard=null)},"PoKeDeX"),(0,s._)("div",p,[d,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>v.inputField=e),onInput:o[2]||(o[2]=(...e)=>v.throttleInput&&v.throttleInput(...e)),type:"text",id:"name",name:"name",required:"",minlength:"1",maxlength:"20",size:"15"},null,544),[[n.nr,v.inputField]])])]),m]),v.openedCard?((0,s.wg)(),(0,s.j4)(w,{key:0,pokemon:v.openedCard,nextPokemon:v.nextCard,prevPokemon:v.prevCard,onChangePokemon:P.updatePokemon},null,8,["pokemon","nextPokemon","prevPokemon","onChangePokemon"])):(0,s.kq)("",!0),v.openedCard?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",c,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(v.hotPokemons,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"pokedex__card card",key:e.id,onClick:o=>P.openCard(e)},[(0,s._)("div",k,[(0,s._)("img",{class:"card__img-item",src:e.img,alt:e.name},null,8,u)]),(0,s._)("div",_,"№"+(0,i.zw)(String(e.id).padStart(3,"0")),1),(0,s._)("div",g,(0,i.zw)(e.name.split("-").join(" ")),1),(0,s._)("div",y,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.types,((e,o)=>((0,s.wg)(),(0,s.iD)("div",{class:(0,i.C_)(["card__type-item",`card__type-item_${e.name}`]),key:o},(0,i.zw)(e.name),3)))),128))])],8,h)))),128))]))])],32)}var v=t(96),P=t.n(v);const w={class:"pokemon"},C={class:"pokemon__pagination"},b={class:"pokemon__button-text"},x={class:"pokemon__button-text"},z={class:"pokemon__card"},S={class:"pokemon__title"},D={class:"pokemon__name"},I={class:"pokemon__id"},O={class:"pokemon__content"},j=["src"],A={class:"pokemon__specs"},G={class:"pokemon__stats"},L={class:"pokemon__flex-wrapper"},T={class:"pokemon__height"},E=(0,s._)("p",null,"Height",-1),$={class:"pokemon__weight"},F=(0,s._)("p",null,"Weight",-1),H={class:"pokemon__gender"},J=(0,s._)("p",null,"Gender",-1),K={key:0,class:"pokemon__gender-item"},q={class:"pokemon__flex-wrapper"},Y={class:"pokemon__category"},U=(0,s._)("p",null,"Category",-1),W={class:"pokemon__abilities"},N=(0,s._)("p",null,"Abilities",-1),M={class:"pokemon__type"},Z=(0,s._)("p",null,"Type",-1),V={class:"card__type"},X={class:"pokemon__weaknesses"},B=(0,s._)("p",null,"Weakness",-1),Q={class:"card__type"};function R(e,o,t,n,a,l){return(0,s.wg)(),(0,s.iD)("div",w,[(0,s._)("div",C,[(0,s._)("button",{class:"pokemon__prev pokemon__button",onClick:o[0]||(o[0]=e=>l.changePokemon(t.pokemon.id-1))},[(0,s._)("div",b,(0,i.zw)(t.prevPokemon.name.split("-").join(" ")+" №"+String(t.prevPokemon.id).padStart(3,"0")),1)]),(0,s._)("button",{class:"pokemon__next pokemon__button",onClick:o[1]||(o[1]=e=>l.changePokemon(t.pokemon.id+1))},[(0,s._)("div",x,(0,i.zw)(t.nextPokemon.name.split("-").join(" ")+" №"+String(t.nextPokemon.id).padStart(3,"0")),1)])]),(0,s._)("div",z,[(0,s._)("div",S,[(0,s._)("p",D,(0,i.zw)(t.pokemon.name.split("-").join(" ")+" "),1),(0,s._)("p",I,"№"+(0,i.zw)(String(t.pokemon.id).padStart(3,"0")),1)]),(0,s._)("div",O,[(0,s._)("img",{src:t.pokemon.img,alt:"",class:"pokemon__img"},null,8,j),(0,s._)("div",A,[(0,s._)("div",G,[(0,s._)("div",L,[(0,s._)("div",T,[E,(0,s.Uk)(" "+(0,i.zw)(`${(t.pokemon.height/10).toFixed(1)} m`),1)]),(0,s._)("div",$,[F,(0,s.Uk)(" "+(0,i.zw)(`${(t.pokemon.weight/10).toFixed(1)} kg`),1)]),(0,s._)("div",H,[J,"genderless"==t.pokemon.gender?((0,s.wg)(),(0,s.iD)("div",K," Unknown ")):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.pokemon.gender,((e,o)=>((0,s.wg)(),(0,s.iD)("div",{class:(0,i.C_)(["pokemon__gender-item",`pokemon__gender-item_${e}`]),key:o},null,2)))),128))])]),(0,s._)("div",q,[(0,s._)("div",Y,[U,(0,s.Uk)(" "+(0,i.zw)(t.pokemon.category),1)]),(0,s._)("div",W,[N,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.pokemon.abilities,((e,o)=>((0,s.wg)(),(0,s.iD)("div",{class:"pokemon__abilities-item",key:o},(0,i.zw)(e.name),1)))),128))])])]),(0,s._)("div",M,[Z,(0,s._)("div",V,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.pokemon.types,((e,o)=>((0,s.wg)(),(0,s.iD)("div",{class:(0,i.C_)(["card__type-item",`card__type-item_${e.name}`]),key:o},(0,i.zw)(e.name),3)))),128))])]),(0,s._)("div",X,[B,(0,s._)("div",Q,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.pokemon.weaknesses,((e,o)=>((0,s.wg)(),(0,s.iD)("div",{class:(0,i.C_)(["card__type-item",`card__type-item_${e}`]),key:o},(0,i.zw)(e),3)))),128))])])])])])])}var ee={props:{pokemon:Object,nextPokemon:Object,prevPokemon:Object},data(){return{}},methods:{changePokemon(e){console.log("click"),this.$emit("change-pokemon",e)}}},oe=t(744);const te=(0,oe.Z)(ee,[["render",R]]);var ne=te,se={name:"App",components:{detailedCard:ne},data(){return{pokePaginationAPI:"https://pokeapi.co/api/v2/pokemon",genderAPI:"https://pokeapi.co/api/v2/gender/",typeAPI:"https://pokeapi.co/api/v2/type/",pokeDummyImage:"https://thumbs.gfycat.com/DampSpanishCleanerwrasse.webp",categoryAPI:"https://pokeapi.co/api/v2/pokemon-species/",gendersCount:0,pokeGenders:{},pokeTypes:new Map,inputField:"",pokemonCount:0,pokeNames:[],lazyPokemons:[],coldPokemons:[],hotPokemons:[],openedCard:null,nextCard:null,prevCard:null,throttleInput:P()(this.pokeSearch,300,{leading:!1,trailing:!0})}},mounted(){this.loadPokemonList()},methods:{loadJson(e){return fetch(e).then((e=>e.json()))},async pokeGenderSet(){let e=await this.loadJson(this.genderAPI);this.gendersCount=e.count;for(let o=1;o<=this.gendersCount;o++){let e=await this.loadJson(this.genderAPI+o);this.pokeGenders[e.name]=new Set,e.pokemon_species_details.forEach((o=>{this.pokeGenders[e.name].add(o.pokemon_species.name)}),this)}},async pokeCategorySet(e){let o=await this.loadJson(`${this.categoryAPI}${e}`),t=o.genera[7].genus;return t.split(" ").slice(0,-1).join(" ")},pokeGenderGet(e){let o=[];return this.pokeGenders.male.has(e)&&o.push("male"),this.pokeGenders.female.has(e)&&o.push("female"),this.pokeGenders.genderless.has(e)&&o.push("genderless"),o},async pokeWeaknessesSet(){let e=[],o=await this.loadJson(this.typeAPI);return o.results.forEach((function(e){this.pokeTypes.set(e.name,{url:e.url})}),this),this.pokeTypes.forEach((function(o){e.push(this.loadJson(o.url))}),this),Promise.all(e).then((e=>{e.forEach((function(e){this.pokeTypes.set(e.name,{weaknesses:[],resistances:[]}),e.damage_relations.double_damage_from?.forEach((function(o){this.pokeTypes.get(e.name).weaknesses.push(o.name)}),this),e.damage_relations.half_damage_from?.forEach((function(o){this.pokeTypes.get(e.name).resistances.push(o.name)}),this),e.damage_relations.no_damage_from?.forEach((function(o){this.pokeTypes.get(e.name).resistances.push(o.name)}),this)}),this)}))},pokeAddOnScroll(){let e=document.querySelector(".pokedex");e.scrollTop+e.clientHeight==e.scrollHeight&&this.hotLoad()},async hotLoad(){await this.coldLoad();let e=this.coldPokemons.length>20?20:this.coldPokemons.length;this.hotPokemons.push(...this.coldPokemons.splice(0,e))},coldLoad(){let e=[],o=this.coldPokemons.length>20?20:this.coldPokemons.length;for(let t=0;t<o;t++)this.coldPokemons[t]!=this.pokeDummyImage&&e.push(this.loadJson(this.coldPokemons[t].pokeAPI));return Promise.all(e).then((e=>{e.forEach((async function(e,o){this.coldPokemons[o].abilities=[];for(let s=0;s<e.abilities.length;s++)this.coldPokemons[o].abilities.push({name:e.abilities[s].ability.name.split("-").join(" "),url:e.abilities[s].ability.url});this.coldPokemons[o].types=[],this.coldPokemons[o].weaknesses=[];let t=[],n=[];for(let s=0;s<e.types.length;s++)t.push(...this.pokeTypes.get(e.types[s].type.name).weaknesses),n.push(...this.pokeTypes.get(e.types[s].type.name).resistances);this.coldPokemons[o].weaknesses=t.filter((e=>!n.includes(e)));for(let s=0;s<e.types.length;s++)this.coldPokemons[o].types.push({name:e.types[s].type.name,url:e.types[s].type.url});this.coldPokemons[o].gender=this.pokeGenderGet(e.name),this.coldPokemons[o].height=e.height,this.coldPokemons[o].weight=e.weight,this.coldPokemons[o].img=e.sprites.other["official-artwork"].front_default||e.sprites.other.home.front_default||this.pokeDummyImage,this.coldPokemons[o].category=await this.pokeCategorySet(e.name)}),this)}))},pokeSearch(){this.coldPokemons=[],this.hotPokemons=[];let e=this.pokeNames.reduce(((e,o,t)=>(console.log(e),0==o.indexOf(this.inputField.toLowerCase())?[[...e[0],t],[...e[1]]]:o.indexOf(this.inputField.toLowerCase())>0?[[...e[0]],[...e[1],t]]:[[...e[0]],[...e[1]]])),[[],[]]);e=[...e[0],...e[1]],e.length?(e.forEach((e=>{this.coldPokemons.push(this.lazyPokemons[e])}),this),this.hotLoad()):e=[]},async lazyLoad(){let e=await this.loadJson(this.pokePaginationAPI);e=await this.loadJson(`${this.pokePaginationAPI}?limit=${this.pokemonCount=e.count}`),e.results.forEach((function(e,o){this.pokeNames.push(e.name),this.lazyPokemons.push({id:o+1,name:e.name,img:this.pokeDummyImage,pokeAPI:e.url})}),this),this.coldPokemons=[...this.lazyPokemons]},async loadPokemonList(){await this.pokeGenderSet(),await this.pokeWeaknessesSet(),await this.lazyLoad(),await this.hotLoad()},openCard(e){this.openedCard=e,this.nextCard=this.lazyPokemons[e.id],this.prevCard=this.lazyPokemons[e.id-2]},async updatePokemon(e){this.lazyPokemons[e-1].img==this.pokeDummyImage&&(this.coldPokemons.push(this.lazyPokemons[e-1]),await this.hotLoad()),this.openedCard=this.lazyPokemons[e-1],this.nextCard=this.lazyPokemons[e],this.prevCard=this.lazyPokemons[e-2]}}};const ie=(0,oe.Z)(se,[["render",f]]);var ae=ie,le=t(310),re=t.n(le);(0,n.ri)(ae).mount("#app");const pe=new(re())(document.querySelector(".pokedex__title"));pe.radius(300)}},o={};function t(n){var s=o[n];if(void 0!==s)return s.exports;var i=o[n]={exports:{}};return e[n].call(i.exports,i,i.exports,t),i.exports}t.m=e,function(){var e=[];t.O=function(o,n,s,i){if(!n){var a=1/0;for(d=0;d<e.length;d++){n=e[d][0],s=e[d][1],i=e[d][2];for(var l=!0,r=0;r<n.length;r++)(!1&i||a>=i)&&Object.keys(t.O).every((function(e){return t.O[e](n[r])}))?n.splice(r--,1):(l=!1,i<a&&(a=i));if(l){e.splice(d--,1);var p=s();void 0!==p&&(o=p)}}return o}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,s,i]}}(),function(){t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,{a:o}),o}}(),function(){t.d=function(e,o){for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){var e={143:0};t.O.j=function(o){return 0===e[o]};var o=function(o,n){var s,i,a=n[0],l=n[1],r=n[2],p=0;if(a.some((function(o){return 0!==e[o]}))){for(s in l)t.o(l,s)&&(t.m[s]=l[s]);if(r)var d=r(t)}for(o&&o(n);p<a.length;p++)i=a[p],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(d)},n=self["webpackChunkpokedex"]=self["webpackChunkpokedex"]||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))}();var n=t.O(void 0,[998],(function(){return t(674)}));n=t.O(n)})();
//# sourceMappingURL=app.8dc7f892.js.map