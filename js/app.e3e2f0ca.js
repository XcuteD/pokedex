(function(){"use strict";var e={492:function(e,o,t){var n=t(963),s=t(252),i=t(577);const a={class:"pokedex"},l={class:"container"},p={class:"pokedex__header"},r={class:"pokedex__menu"},d={class:"pokedex__search"},h=(0,s._)("label",{for:"pokemon-search"},"Find your pokemon: ",-1),m=["value"],c=(0,s._)("div",{class:"pokedex__separator"},null,-1),k={key:1,class:"pokedex__section"},u=["onClick"],_={class:"card__img"},g=["src","alt"],y={class:"card__id"},P={class:"card__name"},f={class:"card__type"};function v(e,o,t,n,v,w){const C=(0,s.up)("detailed-card");return(0,s.wg)(),(0,s.iD)("div",a,[(0,s._)("div",l,[(0,s._)("div",p,[(0,s._)("div",r,[(0,s._)("div",{class:"pokedex__title",onClick:o[0]||(o[0]=e=>this.openedCard=null)}," PoKeDeX "),(0,s._)("div",d,[h,(0,s._)("input",{onInput:[o[1]||(o[1]=(...e)=>v.throttleInput&&v.throttleInput(...e)),o[2]||(o[2]=e=>v.inputField=e.target.value)],value:v.inputField,type:"text",id:"name",name:"name",required:"",minlength:"1",maxlength:"20",size:"15"},null,40,m)])]),c]),v.openedCard?((0,s.wg)(),(0,s.j4)(C,{key:0,class:"detailedCard",pokemon:v.openedCard,nextPokemon:v.nextCard,prevPokemon:v.prevCard,onChangePokemon:w.updatePokemon},null,8,["pokemon","nextPokemon","prevPokemon","onChangePokemon"])):(0,s.kq)("",!0),v.openedCard?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",k,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(v.hotPokemons,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"pokedex__card card",key:e.id,onClick:o=>w.openCard(e)},[(0,s._)("div",_,[(0,s._)("img",{class:"card__img-item",src:e.img,alt:e.name},null,8,g)]),(0,s._)("div",y,"№"+(0,i.zw)(String(e.id).padStart(3,"0")),1),(0,s._)("div",P,(0,i.zw)(e.name.split("-").join(" ")),1),(0,s._)("div",f,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.types,((e,o)=>((0,s.wg)(),(0,s.iD)("div",{class:(0,i.C_)(["card__type-item",`card__type-item_${e.name}`]),key:o},(0,i.zw)(e.name),3)))),128))])],8,u)))),128))])),!v.openedCard&&v.coldPokemons.length>0?((0,s.wg)(),(0,s.iD)("button",{key:2,class:"pokedex__load",onClick:o[3]||(o[3]=(...e)=>this.hotLoad&&this.hotLoad(...e))}," LOAD MORE ("+(0,i.zw)(v.coldPokemons.length)+") ",1)):(0,s.kq)("",!0),v.openedCard?((0,s.wg)(),(0,s.iD)("button",{key:3,class:"pokedex__load",onClick:o[4]||(o[4]=e=>this.openedCard=null)}," LOOK MORE POKEMONS ")):(0,s.kq)("",!0)])])}var w=t(96),C=t.n(w);const x={class:"pokemon"},b={class:"pokemon__pagination"},z={class:"pokemon__button-text"},D={class:"pokemon__button-text"},O={class:"pokemon__card"},S={class:"pokemon__title"},I={class:"pokemon__name"},L={class:"pokemon__id"},j={class:"pokemon__content"},A=["src"],E={class:"pokemon__specs"},G={class:"pokemon__stats"},T={class:"pokemon__flex-wrapper"},$={class:"pokemon__height"},F=(0,s._)("p",null,"Height",-1),J={class:"pokemon__weight"},K=(0,s._)("p",null,"Weight",-1),q={class:"pokemon__gender"},H=(0,s._)("p",null,"Gender",-1),Y={key:0,class:"pokemon__gender-item"},M={class:"pokemon__flex-wrapper"},U={class:"pokemon__category"},N=(0,s._)("p",null,"Category",-1),W={class:"pokemon__abilities"},R=(0,s._)("p",null,"Abilities",-1),Z={class:"pokemon__flex-wrapper"},X={class:"pokemon__type"},B=(0,s._)("p",null,"Type",-1),Q={class:"card__type"},V={class:"pokemon__weaknesses"},ee=(0,s._)("p",null,"Weakness",-1),oe={class:"card__type"};function te(e,o,t,n,a,l){return(0,s.wg)(),(0,s.iD)("div",x,[(0,s._)("div",b,[(0,s._)("button",{class:"pokemon__prev pokemon__button",onClick:o[0]||(o[0]=e=>l.changePokemon(t.pokemon.id-1))},[(0,s._)("div",z,(0,i.zw)("< "+t.prevPokemon.name.split("-").join(" ")+" №"+String(t.prevPokemon.id).padStart(3,"0")),1)]),(0,s._)("button",{class:"pokemon__next pokemon__button",onClick:o[1]||(o[1]=e=>l.changePokemon(t.pokemon.id+1))},[(0,s._)("div",D,(0,i.zw)(t.nextPokemon.name.split("-").join(" ")+" №"+String(t.nextPokemon.id).padStart(3,"0")+"  >"),1)])]),(0,s._)("div",O,[(0,s._)("div",S,[(0,s._)("p",I,(0,i.zw)(t.pokemon.name.split("-").join(" ")+" "),1),(0,s._)("p",L,"№"+(0,i.zw)(String(t.pokemon.id).padStart(3,"0")),1)]),(0,s._)("div",j,[(0,s._)("img",{src:t.pokemon.img,alt:"",class:"pokemon__img"},null,8,A),(0,s._)("div",E,[(0,s._)("div",G,[(0,s._)("div",T,[(0,s._)("div",$,[F,(0,s.Uk)(" "+(0,i.zw)(`${(t.pokemon.height/10).toFixed(1)} m`),1)]),(0,s._)("div",J,[K,(0,s.Uk)(" "+(0,i.zw)(`${(t.pokemon.weight/10).toFixed(1)} kg`),1)]),(0,s._)("div",q,[H,"genderless"==t.pokemon.gender[0]||void 0==t.pokemon.gender[0]?((0,s.wg)(),(0,s.iD)("div",Y," Unknown ")):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.pokemon.gender,((e,o)=>((0,s.wg)(),(0,s.iD)("div",{class:(0,i.C_)(["pokemon__gender-item",`pokemon__gender-item_${e}`]),key:o},null,2)))),128))])]),(0,s._)("div",M,[(0,s._)("div",U,[N,(0,s.Uk)(" "+(0,i.zw)(t.pokemon.category??"Unknown"),1)]),(0,s._)("div",W,[R,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.pokemon.abilities,((e,o)=>((0,s.wg)(),(0,s.iD)("div",{class:"pokemon__abilities-item",key:o},(0,i.zw)(e.name),1)))),128))])])]),(0,s._)("div",Z,[(0,s._)("div",X,[B,(0,s._)("div",Q,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.pokemon.types,((e,o)=>((0,s.wg)(),(0,s.iD)("div",{class:(0,i.C_)(["card__type-item",`card__type-item_${e.name}`]),key:o},(0,i.zw)(e.name),3)))),128))])]),(0,s._)("div",V,[ee,(0,s._)("div",oe,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.pokemon.weaknesses,((e,o)=>((0,s.wg)(),(0,s.iD)("div",{class:(0,i.C_)(["card__type-item",`card__type-item_${e}`]),key:o},(0,i.zw)(e),3)))),128))])])])])])])])}var ne={props:{pokemon:Object,nextPokemon:Object,prevPokemon:Object},data(){return{}},methods:{changePokemon(e){this.$emit("change-pokemon",e)}}},se=t(744);const ie=(0,se.Z)(ne,[["render",te]]);var ae=ie,le={name:"App",components:{detailedCard:ae},data(){return{pokePaginationAPI:"https://pokeapi.co/api/v2/pokemon",genderAPI:"https://pokeapi.co/api/v2/gender/",typeAPI:"https://pokeapi.co/api/v2/type/",pokeDummyImage:"https://thumbs.gfycat.com/DampSpanishCleanerwrasse.webp",categoryAPI:"https://pokeapi.co/api/v2/pokemon-species/",gendersCount:0,pokeGenders:{},pokeTypes:new Map,inputField:"",pokemonCount:0,pokeNames:[],lazyPokemons:[],coldPokemons:[],hotPokemons:[],openedCard:null,nextCard:null,prevCard:null,throttleInput:C()(this.pokeSearch,500,{leading:!1,trailing:!0})}},mounted(){this.loadPokemonList()},updated(){let e=document.querySelector(".pokedex");e.scrollTop=0},methods:{async loadPokemonList(){await this.pokeGenderSet(),await this.pokeWeaknessesSet(),await this.lazyLoad(),await this.hotLoad()},loadJson(e){return fetch(e).then((e=>e.json()))},async pokeGenderSet(){let e=await this.loadJson(this.genderAPI);this.gendersCount=e.count;for(let o=1;o<=this.gendersCount;o++){let e=await this.loadJson(this.genderAPI+o);this.pokeGenders[e.name]=new Set,e.pokemon_species_details.forEach((o=>{this.pokeGenders[e.name].add(o.pokemon_species.name)}),this)}},async pokeWeaknessesSet(){let e=[],o=await this.loadJson(this.typeAPI);return o.results.forEach((function(e){this.pokeTypes.set(e.name,{url:e.url})}),this),this.pokeTypes.forEach((function(o){e.push(this.loadJson(o.url))}),this),Promise.all(e).then((e=>{e.forEach((function(e){this.pokeTypes.set(e.name,{weaknesses:[],resistances:[]}),e.damage_relations.double_damage_from?.forEach((function(o){this.pokeTypes.get(e.name).weaknesses.push(o.name)}),this),e.damage_relations.half_damage_from?.forEach((function(o){this.pokeTypes.get(e.name).resistances.push(o.name)}),this),e.damage_relations.no_damage_from?.forEach((function(o){this.pokeTypes.get(e.name).resistances.push(o.name)}),this)}),this)}))},async lazyLoad(){let e=await this.loadJson(this.pokePaginationAPI);e=await this.loadJson(`${this.pokePaginationAPI}?limit=${this.pokemonCount=e.count}`),e.results.forEach((function(e,o){this.pokeNames.push(e.name),this.lazyPokemons.push({id:o+1,name:e.name,img:this.pokeDummyImage,pokeAPI:e.url})}),this),this.coldPokemons=[...this.lazyPokemons]},async hotLoad(){await this.coldLoad();let e=this.coldPokemons.length>20?20:this.coldPokemons.length;this.hotPokemons.push(...this.coldPokemons.splice(0,e))},coldLoad(){let e=[],o=this.coldPokemons.length>20?20:this.coldPokemons.length;for(let t=0;t<o;t++)this.coldPokemons[t]!=this.pokeDummyImage&&e.push(this.loadJson(this.coldPokemons[t].pokeAPI));return Promise.all(e).then((e=>{e.forEach((async function(e,o){this.coldPokemons[o].abilities=[];for(let s=0;s<e.abilities.length;s++)this.coldPokemons[o].abilities.push({name:e.abilities[s].ability.name.split("-").join(" "),url:e.abilities[s].ability.url});this.coldPokemons[o].types=[],this.coldPokemons[o].weaknesses=[];let t=[],n=[];for(let s=0;s<e.types.length;s++)t.push(...this.pokeTypes.get(e.types[s].type.name).weaknesses),n.push(...this.pokeTypes.get(e.types[s].type.name).resistances);this.coldPokemons[o].weaknesses=t.filter((e=>!n.includes(e)));for(let s=0;s<e.types.length;s++)this.coldPokemons[o].types.push({name:e.types[s].type.name,url:e.types[s].type.url});this.coldPokemons[o].gender=this.pokeGenderGet(e.name),this.coldPokemons[o].height=e.height,this.coldPokemons[o].weight=e.weight,this.coldPokemons[o].img=e.sprites.other["official-artwork"].front_default||e.sprites.other.home.front_default||this.pokeDummyImage,this.coldPokemons[o].category=await this.pokeCategorySet(e.name)}),this)}))},pokeGenderGet(e){let o=[];return this.pokeGenders.male.has(e)&&o.push("male"),this.pokeGenders.female.has(e)&&o.push("female"),this.pokeGenders.genderless.has(e)&&o.push("genderless"),o},async pokeCategorySet(e){let o=await this.loadJson(`${this.categoryAPI}${e}`),t=o.genera[7].genus;return t.split(" ").slice(0,-1).join(" ")},pokeSearch(){console.log("Поиск "+this.inputField),this.coldPokemons=[],this.hotPokemons=[];let e=this.pokeNames.reduce(((e,o,t)=>0==o.indexOf(this.inputField.toLowerCase())?[[...e[0],t],[...e[1]]]:o.indexOf(this.inputField.toLowerCase())>0?[[...e[0]],[...e[1],t]]:[[...e[0]],[...e[1]]]),[[],[]]);e=[...e[0],...e[1]],e.length?(e.forEach((e=>{this.coldPokemons.push(this.lazyPokemons[e])}),this),this.hotLoad()):e=[]},openCard(e){this.openedCard=e,e.id==this.lazyPokemons.length?this.nextCard=this.lazyPokemons[0]:this.nextCard=this.lazyPokemons[e.id],1==e.id?this.prevCard=this.lazyPokemons[this.lazyPokemons.length-1]:this.prevCard=this.lazyPokemons[e.id-2]},async updatePokemon(e){0==e?(this.coldPokemons=[],this.coldPokemons.push(this.lazyPokemons[this.lazyPokemons.length-1]),await this.hotLoad(),this.openCard(this.lazyPokemons[this.lazyPokemons.length-1])):e==this.lazyPokemons.length+1?(this.coldPokemons=[],this.coldPokemons.push(this.lazyPokemons[0]),await this.hotLoad(),this.openCard(this.lazyPokemons[0])):(this.coldPokemons=[],this.coldPokemons.push(this.lazyPokemons[e-1]),await this.hotLoad(),this.openCard(this.lazyPokemons[e-1]))}}};const pe=(0,se.Z)(le,[["render",v]]);var re=pe,de=t(310),he=t.n(de);(0,n.ri)(re).mount("#app");const me=new(he())(document.querySelector(".pokedex__title"));me.radius(300)}},o={};function t(n){var s=o[n];if(void 0!==s)return s.exports;var i=o[n]={exports:{}};return e[n].call(i.exports,i,i.exports,t),i.exports}t.m=e,function(){var e=[];t.O=function(o,n,s,i){if(!n){var a=1/0;for(d=0;d<e.length;d++){n=e[d][0],s=e[d][1],i=e[d][2];for(var l=!0,p=0;p<n.length;p++)(!1&i||a>=i)&&Object.keys(t.O).every((function(e){return t.O[e](n[p])}))?n.splice(p--,1):(l=!1,i<a&&(a=i));if(l){e.splice(d--,1);var r=s();void 0!==r&&(o=r)}}return o}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,s,i]}}(),function(){t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,{a:o}),o}}(),function(){t.d=function(e,o){for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){var e={143:0};t.O.j=function(o){return 0===e[o]};var o=function(o,n){var s,i,a=n[0],l=n[1],p=n[2],r=0;if(a.some((function(o){return 0!==e[o]}))){for(s in l)t.o(l,s)&&(t.m[s]=l[s]);if(p)var d=p(t)}for(o&&o(n);r<a.length;r++)i=a[r],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(d)},n=self["webpackChunkpokedex"]=self["webpackChunkpokedex"]||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))}();var n=t.O(void 0,[998],(function(){return t(492)}));n=t.O(n)})();
//# sourceMappingURL=app.e3e2f0ca.js.map